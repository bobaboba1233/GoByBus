{"ast":null,"code":"import React,{useState,useContext,useRef,useEffect}from'react';import{Link}from'react-router-dom';import logo from'../logo.svg';import'../styles/header.css';import Login from'./Login';import{AuthContext}from'../context/AuthContext';import Register from'./Register';import{FaUser,FaCog,FaSignOutAlt}from'react-icons/fa';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=()=>{const[isLoginOpen,setLoginOpen]=useState(false);const[isRegisterOpen,setRegisterOpen]=useState(false);const[isMenuOpen,setIsMenuOpen]=useState(false);const{user,isAuth,logout}=useContext(AuthContext);const menuRef=useRef();// Закрытие меню при клике вне его\nuseEffect(()=>{const handleClickOutside=event=>{if(menuRef.current&&!menuRef.current.contains(event.target)){setIsMenuOpen(false);}};document.addEventListener('mousedown',handleClickOutside);return()=>document.removeEventListener('mousedown',handleClickOutside);},[]);return/*#__PURE__*/_jsx(\"header\",{className:\"header\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"logo\",children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"\\u041B\\u043E\\u0433\\u043E\\u0442\\u0438\\u043F\"})}),/*#__PURE__*/_jsxs(\"nav\",{className:\"nav\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F\"}),/*#__PURE__*/_jsx(Link,{to:\"/tours\",children:\"\\u0412\\u044B\\u0433\\u043E\\u0434\\u043D\\u044B\\u0435 \\u043F\\u0443\\u0442\\u0435\\u0432\\u043A\\u0438\"}),/*#__PURE__*/_jsx(Link,{to:\"/support\",children:\"\\u041F\\u043E\\u0434\\u0434\\u0435\\u0440\\u0436\\u043A\\u0430\"}),isAuth?/*#__PURE__*/_jsxs(\"div\",{className:\"user-menu-container\",ref:menuRef,children:[/*#__PURE__*/_jsx(\"div\",{className:\"user-avatar\",onClick:()=>setIsMenuOpen(!isMenuOpen),children:/*#__PURE__*/_jsx(\"img\",{src:(user===null||user===void 0?void 0:user.avatar)||`https://ui-avatars.com/api/?name=${user===null||user===void 0?void 0:user.email[0]}&background=random`,alt:\"\\u0410\\u0432\\u0430\\u0442\\u0430\\u0440\",onError:e=>{e.target.src=`https://ui-avatars.com/api/?name=U&background=random`;}})}),isMenuOpen&&/*#__PURE__*/_jsxs(\"div\",{className:\"dropdown-menu\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/profile\",onClick:()=>setIsMenuOpen(false),children:[/*#__PURE__*/_jsx(FaUser,{className:\"menu-icon\"}),\" \\u041C\\u043E\\u0439 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"]}),/*#__PURE__*/_jsxs(Link,{to:\"/settings\",onClick:()=>setIsMenuOpen(false),children:[/*#__PURE__*/_jsx(FaCog,{className:\"menu-icon\"}),\" \\u041D\\u0430\\u0441\\u0442\\u0440\\u043E\\u0439\\u043A\\u0438\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{logout();setIsMenuOpen(false);},children:[/*#__PURE__*/_jsx(FaSignOutAlt,{className:\"menu-icon\"}),\" \\u0412\\u044B\\u0439\\u0442\\u0438\"]})]})]}):/*#__PURE__*/_jsx(\"button\",{className:\"auth-link\",onClick:()=>setLoginOpen(true),children:\"\\u0412\\u0445\\u043E\\u0434\"})]}),isLoginOpen&&/*#__PURE__*/_jsx(Login,{onClose:()=>setLoginOpen(false),onSwitchToRegister:()=>{setLoginOpen(false);setRegisterOpen(true);}}),isRegisterOpen&&/*#__PURE__*/_jsx(Register,{onClose:()=>setRegisterOpen(false),onSwitchToLogin:()=>{setRegisterOpen(false);setLoginOpen(true);}})]})});};export default Header;","map":{"version":3,"names":["React","useState","useContext","useRef","useEffect","Link","logo","Login","AuthContext","Register","FaUser","FaCog","FaSignOutAlt","jsx","_jsx","jsxs","_jsxs","Header","isLoginOpen","setLoginOpen","isRegisterOpen","setRegisterOpen","isMenuOpen","setIsMenuOpen","user","isAuth","logout","menuRef","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","className","children","to","src","alt","ref","onClick","avatar","email","onError","e","onClose","onSwitchToRegister","onSwitchToLogin"],"sources":["C:/Users/богдан/Desktop/gobybus/client/src/components/Header.jsx"],"sourcesContent":["import React, { useState, useContext, useRef, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../logo.svg';\nimport '../styles/header.css';\nimport Login from './Login';\nimport { AuthContext } from '../context/AuthContext';\nimport Register from './Register';\nimport { FaUser, FaCog, FaSignOutAlt } from 'react-icons/fa';\n\nconst Header = () => {\n  const [isLoginOpen, setLoginOpen] = useState(false);\n  const [isRegisterOpen, setRegisterOpen] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const { user, isAuth, logout } = useContext(AuthContext);\n  const menuRef = useRef();\n\n  // Закрытие меню при клике вне его\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (menuRef.current && !menuRef.current.contains(event.target)) {\n        setIsMenuOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  return (\n    <header className=\"header\">\n      <div className=\"container\">\n        <Link to=\"/\" className=\"logo\">\n          <img src={logo} alt=\"Логотип\" />\n        </Link>\n        <nav className=\"nav\">\n          <Link to=\"/\">Главная</Link>\n          <Link to=\"/tours\">Выгодные путевки</Link>\n          <Link to=\"/support\">Поддержка</Link>\n          \n          {isAuth ? (\n            <div className=\"user-menu-container\" ref={menuRef}>\n              <div \n                className=\"user-avatar\" \n                onClick={() => setIsMenuOpen(!isMenuOpen)}\n              >\n                <img \n                  src={user?.avatar || `https://ui-avatars.com/api/?name=${user?.email[0]}&background=random`} \n                  alt=\"Аватар\" \n                  onError={(e) => {\n                    e.target.src = `https://ui-avatars.com/api/?name=U&background=random`;\n                  }}\n                />\n              </div>\n              \n              {isMenuOpen && (\n                <div className=\"dropdown-menu\">\n                  <Link to=\"/profile\" onClick={() => setIsMenuOpen(false)}>\n                    <FaUser className=\"menu-icon\" /> Мой профиль\n                  </Link>\n                  <Link to=\"/settings\" onClick={() => setIsMenuOpen(false)}>\n                    <FaCog className=\"menu-icon\" /> Настройки\n                  </Link>\n                  <button onClick={() => { logout(); setIsMenuOpen(false); }}>\n                    <FaSignOutAlt className=\"menu-icon\" /> Выйти\n                  </button>\n                </div>\n              )}\n            </div>\n          ) : (\n            <button \n              className=\"auth-link\" \n              onClick={() => setLoginOpen(true)}\n            >\n              Вход\n            </button>\n          )}\n        </nav>\n\n        {/* Модальные окна */}\n        {isLoginOpen && (\n          <Login\n            onClose={() => setLoginOpen(false)}\n            onSwitchToRegister={() => {\n              setLoginOpen(false);\n              setRegisterOpen(true);\n            }}\n          />\n        )}\n\n        {isRegisterOpen && (\n          <Register\n            onClose={() => setRegisterOpen(false)}\n            onSwitchToLogin={() => {\n              setRegisterOpen(false);\n              setLoginOpen(true);\n            }}\n          />\n        )}\n      </div>\n    </header>\n  );\n};\n\nexport default Header;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}